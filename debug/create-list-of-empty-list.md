

## How to create list of empty list



비어있는 리스트들의 리스트를 미리 만들고 거기에 데이터를 추가하는 코드를 다음과 같이 짠다면 이상한 결과가 나온다.

```python
out = [[]]*3
for i in range(3):
    out[i].append(i)
print(out)

=> [[0, 1, 2], [0, 1, 2], [0, 1, 2]]
```

아무리봐도 `[[0], [1], [2]]`가 나와야 할 것 같은데, 각 내부 리스트에 한번씩만 데이터를 추가했는데, 세 개의 리스트가 다 세 개씩 같은 값을 갖게 된다.  

원인은 처음에 비어있는 리스트들의 리스트를 만들때 `*3` 연산을 했는데 리스트의 복제 연산자가 `[[]]`에 대한 하드카피를 하는게 아니라 포인터만 복사하는 소프트카피를 하기 때문에 `out == [[], [], []]`이 되더라도 세 개의 내부 리스트는 모두 다 같은 포인터를 가지는 같은 객체가 된다.  

이를 막기 위해서는 그냥 `out = [[], [], []]` 이라고 하든가 아니면 `out = [[] for i in range(3)]`이라고 해야한다.

```python
out = [[] for i in range(3)]
for i in range(3):
    out[i].append(i)
print(out)

=> [[0], [1], [2]]
```





